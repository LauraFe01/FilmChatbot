version: "3.1"

rules:

- rule: Activate the form film count
  steps:
    - intent: ask_film_count
    - action: film_count_form
    - active_loop: film_count_form

- rule: Complete the form (with optional slots)
  condition:
    - active_loop: film_count_form
  steps:
    - action: film_count_form
    - active_loop: null
    - action: action_count_films

- rule: Stop form film count
  steps:
    - intent: stop
    - action: action_deactivate_loop
    - active_loop: null
    - action: utter_form_stopped
    - action: action_reset_director_form

- rule: Activate movie recommendation form
  steps:
    - intent: provide_movie_recommendation
    - action: movie_recommendation_form
    - active_loop: movie_recommendation_form

- rule: Submit movie recommendation form
  condition:
    - active_loop: movie_recommendation_form
  steps:
    - action: movie_recommendation_form
    - active_loop: null
    - action: action_provide_movie_recommendation

- rule: Stop movie recommendation form
  condition:
      - active_loop: movie_recommendation_form
  steps:
    - intent: stop
    - action: action_deactivate_loop
    - active_loop: null
    - action: utter_form_stopped
    - action: action_reset_movie_preferences

- rule: Activate gross_votes recommendation form
  steps:
    - intent: provide_gross_votes_movie_recommendation
    - action: gross_votes_recommendation_form
    - active_loop: gross_votes_recommendation_form

- rule: Submit gross_votes recommendation form
  condition:
    - active_loop: gross_votes_recommendation_form
  steps:
    - action: gross_votes_recommendation_form
    - active_loop: null
    - action: action_gross_votes_recommendation

- rule: Stop gross_votes recommendation form
  condition:
    - active_loop: gross_votes_recommendation_form
  steps:
    - intent: stop
    - action: action_deactivate_loop
    - active_loop: null
    - action: utter_form_stopped
    - action: action_reset_gross_votes_recommendation_form

